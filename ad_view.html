<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad Processor</title>
    <style> 
        body { 
            margin: 0; 
            background: #000; 
            overflow: hidden; 
            font-family: 'Courier New', monospace; 
            color: #00ff00; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        } 
        
        #status-box {
            border: 1px solid #333;
            padding: 20px;
            background: rgba(10, 10, 10, 0.9);
            width: 80%;
            max-width: 400px;
            text-align: center;
        }

        h2 { margin: 0 0 10px 0; color: #fff; font-size: 16px; }
        p { margin: 5px 0; font-size: 12px; color: #888; }
        
        .status-live { color: #00ff00; font-weight: bold; }
        .status-wait { color: #ffff00; }

        /* THE INVISIBLE AD CONTAINER */
        #hidden-ad-slot {
            position: absolute;
            top: -1000px;
            left: -1000px;
            width: 1px;
            height: 1px;
            opacity: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>

    <div id="status-box">
        <h2>MONETAG DIRECT LINK SYSTEM</h2>
        <p>Status: <span id="current-status" class="status-wait">Initializing...</span></p>
        <p>Total Cycles: <span id="cycle-count" style="color:white">0</span></p>
        <p>Next Refresh: <span id="timer">--</span></p>
    </div>

    <div id="hidden-ad-slot"></div>

    <script>
        // --- CONFIGURATION ---
        const directLink = 'https://otieu.com/4/10310118'; 
        const cycleInterval = 300000; // 5 Minutes (Best for Direct Links)
        const adDuration = 15000;     // Keep ad open for 15s to register view
        // ---------------------

        let cycles = 0;

        function runAdCycle() {
            // 1. Update UI
            document.getElementById('current-status').className = 'status-live';
            document.getElementById('current-status').innerText = "Requesting Ad...";
            
            // 2. Create Invisible Iframe
            const slot = document.getElementById('hidden-ad-slot');
            slot.innerHTML = ''; // Clear previous
            
            const frame = document.createElement('iframe');
            frame.src = directLink;
            // Sandbox prevents the ad from navigating the TOP window (breaking the bot)
            // But allows scripts so the ad counts.
            frame.sandbox = "allow-scripts allow-same-origin allow-forms"; 
            frame.style.width = "300px";
            frame.style.height = "250px";
            
            slot.appendChild(frame);

            // 3. Wait for view to register, then kill it
            setTimeout(() => {
                cycles++;
                document.getElementById('cycle-count').innerText = cycles;
                document.getElementById('current-status').className = 'status-wait';
                document.getElementById('current-status').innerText = "Ad Closed. Cooling Down...";
                
                // Destroy the iframe to stop audio/redirects
                slot.innerHTML = ''; 
                
                // Start Countdown to next
                startCountdown(cycleInterval / 1000);
            }, adDuration);
        }

        function startCountdown(seconds) {
            let counter = seconds;
            const interval = setInterval(() => {
                counter--;
                document.getElementById('timer').innerText = counter + "s";
                
                if (counter <= 0) {
                    clearInterval(interval);
                    runAdCycle(); // Loop
                }
            }, 1000);
        }

        // Start immediately
        runAdCycle();

    </script>
</body>
</html>
